## 服务运营状态分析平台

    链路跟踪，在微服务时代变的日益重要，它复现了服务那一刻的具体的服务参与方。但是，更多时候，各个团队，各个角色可能需要获取不同角度的数据

#### 开发团队：
1. 单次请求的链路
2. 请求链路的数据复现 - 请求头/体, 响应头/体
3. 根据traceid能定位到具体的日志
---

#### 架构师：
1. 各服务响应请求的宏观数据，如每天被请求的api的响应分布，哪些服务链路过长等
2. 分析出平台的瓶颈 - 哪些api响应过慢，哪些服务报错过多
3. 分析出平台架构设计的缺陷 - 如哪些服务应该被拆分，哪些应该聚合等
---

#### 业务团队：
1. 服务宏观被调用的分布，哪些服务用户使用的多，新上线的功能时候被用户使用等
2. 通过查看用户访问数据，确定哪些项目应该多投入人力物力
3. 通过历史的时序数据预测到未来的指标增长
---

#### DevOps团队：
1. 平台应该适用于任何工程，独立于特定语言，做到几乎无需任何代码层的改动 - 无需引入第三方代码层组件
2. 平台的功能迭代应独立于工程，用户侧无感知
3. 服务间的各种访问元数据应该能独立存储

### 方案调研

#### 传统方案
    传统方案在代码层引用第三方开源或者商业化的组件，在代码层将数据发送到中央平台，中央平台负责数据的管理与展示

传统方案有以下几个问题:
1. 代码层组件，需要重新编译打包发布，工作量巨大
2. 代码层组件，风险性大，一旦出现问题，很难定位到具体原因
3. 代码层组件，一般只能适用于特定几个语言，如python，java等，对于很多新语言支持较慢
4. 代码层组件一旦更新，所有使用到改组件的工程都要重新打包编译

#### 云原生方案 - [Istio](https://istio.io/)
    云原生方案，社区提出了服务网格的概念，该领域的领导者，Istio，在基础设施层解决了大家关注的各种个问题。
    Istio，服务网格，使用单pod单sidecar模式，劫持pod的进出流量，独立管理面与数据面，将各种数据通过sidecar提交给后台。

服务网格解决方案有以下几个显著优点:
1. 通过sidecar流量劫持，使得业务层代码只需关注业务逻辑，简化代码架构，降低故障发生
2. sidecar是基于协议层的流量劫持，不关注具体语言
3. 代码几乎无改动即可实现链路跟踪等功能
4. sidecar的span中包含了众多元数据，便于后期分析
5. 最重要的一点，istio将能力下放到了底层，赋能基建


### 平台介绍
    下面将按照角色分类，阐述每一个功能模块的能力

1. [业务团队](business/README.md) 
2. [架构师](architecturer/README.md) 